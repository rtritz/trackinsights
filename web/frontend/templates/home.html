{% extends 'base.html' %}

{% block content %}




<!-- Z is less than 10 -->
<div class="w-full h-screen sticky top-0">
  <div style="isolation:isolate"
    class="w-full h-screen flex items-center justify-center bg-transparent relative overflow-hidden">
    <!-- Background image slideshow -->
    <div id="bg-slideshow" class="absolute top-0 left-0 w-full h-full">
      <img id="bg-image-1"
        class="absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-500 ease-in-out"
        style="opacity: 1; object-position: top;" />
      <img id="bg-image-2"
        class="absolute top-0 left-0 w-full h-full object-cover transition-opacity duration-500 ease-in-out"
        style="opacity: 0; object-position: top;" />
    </div>

    <script>
      (function () {
        // Define all background images
        const licensedImageCount = 12;
        const licensedImages = Array.from({ length: licensedImageCount }, (_, i) => `../static/images/background_images_licensed/bg_${i + 1}.webp`);
        const allImages = [...licensedImages];

        // Shuffle array
        function shuffle(array) {
          const shuffled = [...array];
          for (let i = shuffled.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
          }
          return shuffled;
        }

        const shuffledImages = shuffle(allImages);
        let currentIndex = 0;
        let currentImageElement = 1; // Toggle between 1 and 2

        const img1 = document.getElementById('bg-image-1');
        const img2 = document.getElementById('bg-image-2');

        // Set first image
        img1.src = shuffledImages[0];

        // Preload next image
        function preloadNext() {
          const nextIndex = (currentIndex + 1) % shuffledImages.length;
          const img = new Image();
          img.src = shuffledImages[nextIndex];
        }

        // Transition to next image
        function nextImage() {
          currentIndex = (currentIndex + 1) % shuffledImages.length;

          if (currentImageElement === 1) {
            // Preload the image first to avoid gaps
            const tempImg = new Image();
            tempImg.onload = function () {
              // Load the new image into img2 (underneath)
              img2.src = shuffledImages[currentIndex];
              img2.style.opacity = '1';
              img2.style.zIndex = '0';

              // Fade out img1 (on top) to reveal img2
              img1.style.zIndex = '1';
              img1.style.opacity = '0';
            };
            tempImg.src = shuffledImages[currentIndex];
            currentImageElement = 2;
          } else {
            // Preload the image first to avoid gaps
            const tempImg = new Image();
            tempImg.onload = function () {
              // Load the new image into img1 (underneath)
              img1.src = shuffledImages[currentIndex];
              img1.style.opacity = '1';
              img1.style.zIndex = '0';

              // Fade out img2 (on top) to reveal img1
              img2.style.zIndex = '1';
              img2.style.opacity = '0';
            };
            tempImg.src = shuffledImages[currentIndex];
            currentImageElement = 1;
          }

          preloadNext();
        }

        // Change image every 5 seconds
        setInterval(nextImage, 7500);
        preloadNext();
      })();
    </script>

  <div class="hero-title no-select" tabindex="0">
      <span class="hero-title__text">
        Track Insights
      </span>
    </div>

  <div class="absolute bottom-4 right-4 md:bottom-6 md:right-6 text-[10px] sm:text-xs  uppercase text-white/80 drop-shadow-lg font-semibold no-select">
      Images licensed from IndyStar
    </div>
  </div>
  <!-- <img src="../static/images/Track_Insights_Text.png" alt="Track Insights" style="height:60vh; width:80vw;"
      class="isolate brightness-100 opacity-50 absolute left-1/2 top-1/2 -translate-x-[52%] -translate-y-[58%] lg:-translate-y-[60%] select-none z-2"
      style="pointer-events: none;" /> -->

  <!-- See more text hint -->
  <!-- <div class="absolute bottom-8 left-1/2 -translate-x-1/2 z-3 pointer-events-none" style="isolation: isolate;">
    <p class="text-white text-xl font-semibold tracking-widest uppercase animate-fade-bounce">
      See More
    </p>
  </div> -->


  <style>
    @import url('https://fonts.googleapis.com/css2?family=Impact:wght@400&display=swap');
    .no-select {
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    .hero-title {
      position: relative;
      z-index: 5;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: clamp(2rem, 5vw, 4rem) clamp(3rem, 8vw, 6rem);
      text-transform: uppercase;
      letter-spacing: clamp(0.3rem, 1vw, 1.4rem);
    font-family: 'Impact', 'Arial Black', 'Segoe UI', sans-serif;
      font-size: clamp(3.5rem, 8vw, 8rem);
      color: rgba(255, 255, 255, 0.92);
      text-align: center;
      /* cursor: pointer; */
      border-radius: clamp(1.5rem, 4vw, 3.5rem);
      transition: transform 450ms cubic-bezier(0.19, 1, 0.22, 1),
        letter-spacing 450ms cubic-bezier(0.19, 1, 0.22, 1),
        color 300ms ease;
      isolation: isolate;
    }

    .hero-title::before {
      content: '';
      position: absolute;
      inset: clamp(-2.5rem, -3vw, -1.5rem);
      border-radius: inherit;
      background: rgba(6, 6, 12, 0.4);
      backdrop-filter: blur(0px);
      -webkit-backdrop-filter: blur(0px);
      opacity: 0;
      transform: scale(0.94);
      transition: opacity 350ms ease, transform 450ms cubic-bezier(0.19, 1, 0.22, 1),
        backdrop-filter 350ms ease, -webkit-backdrop-filter 350ms ease;
      z-index: -1;
    }

    .hero-title__text {
      display: block;
      line-height: 0.85;
      text-shadow: 0 10px 22px rgba(0, 0, 0, 0.55);
      filter: drop-shadow(0 18px 28px rgba(0, 0, 0, 0.45));
      transition: filter 350ms ease, text-shadow 350ms ease;
    }

    @media (max-width: 640px) {
      .hero-title__text {
        line-height: 0.95;
      }
    }


    .hero-title--static {
      pointer-events: none;
      cursor: default;
      transition: none;
    }

    .hero-title--static:hover,
    .hero-title--static:focus-visible {
      transform: none;
      letter-spacing: clamp(0.2rem, 1.5vw, 0.8rem);
      color: rgba(255, 255, 255, 0.92);
    }

    .hero-title--static::before {
      opacity: 0;
      transform: scale(0.94);
      backdrop-filter: blur(0px);
      -webkit-backdrop-filter: blur(0px);
    }

    .hero-title:hover,
    .hero-title:focus-visible {
      transform: translateY(-6px) scale(1.02);
      letter-spacing: clamp(0.35rem, 1.1vw, 1.5rem);
      color: #fff9ec;
    }
    
    .hero-title:hover::before,
    .hero-title:focus-visible::before {
      opacity: 1;
      transform: scale(1.02);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
    }

    .hero-title:hover .hero-title__text,
    .hero-title:focus-visible .hero-title__text {
      text-shadow: 0 14px 28px rgba(0, 0, 0, 0.65);
      filter: drop-shadow(0 22px 38px rgba(0, 0, 0, 0.55));
    }

    @media (max-width: 900px) and (orientation: landscape) {
      .hero-title {
        pointer-events: none;
        cursor: default;
      }

    }

    @media (min-width: 1024px) {
      .hero-title__text {
        white-space: nowrap;
      }

      .hero-title:hover,
      .hero-title:focus-visible {
        transform: none;
        letter-spacing: clamp(0.3rem, 1vw, 1.4rem);
        color: rgba(255, 255, 255, 0.92);
      }

      .hero-title:hover::before,
      .hero-title:focus-visible::before {
        opacity: 0;
        transform: scale(0.94);
        backdrop-filter: blur(0px);
        -webkit-backdrop-filter: blur(0px);
      }

      .hero-title:hover .hero-title__text,
      .hero-title:focus-visible .hero-title__text {
        text-shadow: 0 10px 22px rgba(0, 0, 0, 0.55);
        filter: drop-shadow(0 18px 28px rgba(0, 0, 0, 0.45));
      }

    
    }

    /* Gentle bounce animation for "See More" text */
    @keyframes fade-bounce {

      0%,
      100% {
        transform: translateY(0px);
      }

      50% {
        transform: translateY(-5px);
      }
    }

    .animate-fade-bounce {
      animation: fade-bounce 2s ease-in-out infinite;
    }

  </style>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const heroTitle = document.querySelector('.hero-title');

      if (!heroTitle) {
        return;
      }

      const landscapeQuery = window.matchMedia('(max-width: 900px) and (orientation: landscape)');
      const mobileQuery = window.matchMedia('(max-width: 767px)');

      const updateHeroInteractivity = () => {
        const isLandscapeMobile = landscapeQuery.matches;
        const isMobile = mobileQuery.matches;
        const shouldDisable = isLandscapeMobile || isMobile;

        if (shouldDisable) {
          heroTitle.classList.add('hero-title--static');
          heroTitle.removeAttribute('tabindex');
        } else {
          heroTitle.classList.remove('hero-title--static');
          if (!heroTitle.hasAttribute('tabindex')) {
            heroTitle.setAttribute('tabindex', '0');
          }
        }

      };

      updateHeroInteractivity();

      if (landscapeQuery.addEventListener) {
        landscapeQuery.addEventListener('change', updateHeroInteractivity);
      } else if (landscapeQuery.addListener) {
        landscapeQuery.addListener(updateHeroInteractivity);
      }

      if (mobileQuery.addEventListener) {
        mobileQuery.addEventListener('change', updateHeroInteractivity);
      } else if (mobileQuery.addListener) {
        mobileQuery.addListener(updateHeroInteractivity);
      }

      window.addEventListener('orientationchange', updateHeroInteractivity);
      window.addEventListener('resize', updateHeroInteractivity);
    });
  </script>

</div>
</div>
{% endblock %}