## Objective
Build upon our work from the previous step.

## Arnay
Focus on making the homepage AMAZING! We want this to have the "wow" factor when users visit our site. Also, determine what we want in the base.html (headers, footers, etc.) and formalize that. Explore the photo slideshow option, and see what you think of that compared to a video. You can find the IndyStar photos here: 

https://www.indystar.com/picture-gallery/sports/high-school/2025/06/07/see-photos-from-the-ihsaa-121st-annual-boys-track-and-field-state-finals/84083697007/

https://www.indystar.com/picture-gallery/sports/high-school/2025/06/07/see-photos-from-the-ihsaa-51st-annual-girls-track-and-field-state-finals/84096994007/

## Owen
Start building the queries necessary for the athlete dashboard. Below is visually what the page may look like; of course, you don't have to worry about the front-end, but rather just the queries that will elicit the data necessary to build the page. 

### Jane Doe | Central HS | 2024

### Badges

‚≠ê **Sectional Participant/Placer** | 2 x üèÖ **Regional Qualifier/Placer** | üèÜ **State Qualifier/Placer** 

For Sectional badge, include their highest acheivement, either participant or placer. 
For Regional badge, include their highest acheivement, either qualifier or placer. If they have acheived this highest achievemnt more than once, denote how many times they acheived it, such as "2 x ...". Regional medalist are top 8.
For State badge, do the same as Regionals, but with State data. Note that State medalist are top 9. 

### Playoff Result History for Individual Events
| Year | Event | Sectional | Regional | State |
|------|-------|-----------|---------|-------|
| 2023 | 200m  | 23.80 (4th) | 23.65 (5th) | ‚Äì |
| 2023 | 400m  | 51.30 (2nd) | 51.10 (6th) | 51.40 (12th) |
| 2024 | 400m  | 50.90 (1st) | 51.02 (7th) | ‚Äì |

For now, we will NOT have any links. We will just show the data to keep it simple, and then add the links later. 

--Additional

Send me an email that explains how your search query works. Think of this as a "tool tip" that may be included on our web app. I will add your explaination to our documentation. 

Add queries for obtaining the below information. There needs to be a query that provides a list of all athletes' events, their PR for that event (and the year and meet type for that PR), their All-Time rank for their school, and their All-Time rank for Indiana. 

### Personal Bests  

- **200m:** **23.65** (2023 Regional)  
   ‚Ä¢ üè´ [#2 of 8 All-Time at Central HS](#school-200m-ranking) since 2022  
   ‚Ä¢ üèÖ [#15 of 450 All-Time in Indiana](#state-200m-ranking) since 2022  

- **400m:** **50.90** (2024 Sectional)  
   ‚Ä¢ üè´ [#1 of 10 All-Time at Central HS](#school-400m-ranking) since 2022  
   ‚Ä¢ üèÖ [#12 of 420 All-Time in Indiana](#state-400m-ranking) since 2022 

## Justin
Analyze the database for integrity. Here are some checks to perform:
1. Verify that any fields that must be a specific value (e.g., gender must be "Boys" or "Girls") only have entries of that value in the database. Check all such fields.

2. Verify that there are no NULL or empty fields that should be populated.

3. Verify foreign key consistency: Make sure every foreign key value actually exists in the referenced table. For example, every Athlete.gender must exist in the Gender table. This will catch any ‚Äúorphaned‚Äù references.

4. Verify unique constraints: Check that all fields that are supposed to be unique (e.g., Athlete ID, Meet ID) really are unique.

5. Verify referential constraints. For example, in the Athlete table, gender is a foreign key referencing Gender.gender and it has a constraint of ON UPDATE CASCADE. This means if the gender table updates a value (e.g., "Boys" ‚Üí "Male"), all matching Athlete entries will update automatically. Test this in a copy of the database so your main data remains safe. You should test ON UPDATE adn ON DELETE cascades.

6. Spot check cross-table integrity. For example, make sure athlete result records match to athletes and meets. 

7. Check for duplicate rows. For example, are there duplicate ahletes, meets, etc.

8. Use Ashiv‚Äôs scoring program to verify meet scores. This can be used to ‚Äúspot check‚Äù meets for accuracy: do the results match those on IHSAA? Check a handful of meets: 4 Sectionals, 4 Regionals, and 2 State meets, for both genders, using last season‚Äôs data. You can find the Meet Scoring program here: https://github.com/trackinsights/trackinsights
   
Keep a checklist of tests performed for each table/column and record any anomalies and whether they were fixed. Consider creating 
SQL scripts for automated integrity checks so you can rerun them periodically.

--Additional

Modify the percentile program such that it has a callable function for our web app. The desired function is listed below. 

Below are steps to complete:

1) Convert the Jupiter Notebook to a python script.

   ```
   jupyter nbconvert --to script <name of jupiter notebook>.ipynb
   ```
   This will create a .py file. 
   
3) Update the code to include the below callable function. 

```python
def get_percentiles(
    events=None,                # tuple of events to include in results. None means all events.
    genders=None,               # tuple of genders to include in results. None means both Boys and Girls.
    percentiles=(25, 50, 75),   # tuple of percentiles to include in results.
    years=None,                 # tuple of years to include in calculation, or None
    meet_types=None             # tuple of meet types to include in calculation, or None
):
    """
    Returns percentile data for track & field events.

    Parameters:
         events (tuple[str] or None): Events to include in results. None means all events.
         genders (tuple[str] or None): Genders to include in results. None means both Boys and Girls.
         percentiles=(25, 50, 75): Percentiles to include in results.
         years (tuple[int] or None): Years of data used in percentile calculations. None means all years.
         meet_types (tuple[str] or None): Meet types used in percentile calculations. None means all meet types.

    Notes:
        - `events`, `genders`, and `percentiles` indicate what to include in results.
        - `years` and `meet_types` indicate what to include in percentile calculation. Percentiles are aggregated across all selected years and meet types, not split by them.
    """
    
```

3) Test your function thoroughly to ensure it works with a variety of parameter options.
   
5) Place your code file in the following path, which you need to add.

```
backend/scripts/
‚îú‚îÄ‚îÄ percentiles.py
```


