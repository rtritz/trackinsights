{% extends 'base.html' %}

{% block content %}
    <!-- Loading screen overlay with animated text -->
    <div id="loading-overlay" class="fixed inset-0 bg-white z-[9999] flex flex-col items-center justify-center">
      <div class="text-center">
        <div id="track-text" class="font-impact italic text-primary text-8xl md:text-9xl font-bold opacity-0" style="font-family: Impact, 'Arial Black', sans-serif;">
          Track
        </div>
        <div id="insights-text" class="font-impact italic text-primary text-8xl md:text-9xl font-bold opacity-0" style="font-family: Impact, 'Arial Black', sans-serif;">
          Insights
        </div>
      </div>
    </div>

    <style>
      @keyframes floatIn {
        from {
          opacity: 0;
          transform: translateY(50px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      @keyframes slideOutRight {
        from {
          transform: translateX(0);
          opacity: 1;
        }
        to {
          transform: translateX(100%);
          opacity: 0;
        }
      }
      
      .float-in {
        animation: floatIn 0.6s ease-out forwards;
      }
      
      .slide-out {
        animation: slideOutRight .8s ease-in-out forwards;
      }
    </style>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const overlay = document.getElementById('loading-overlay');
        const trackText = document.getElementById('track-text');
        const insightsText = document.getElementById('insights-text');
        
        // Animate "Track" first
        setTimeout(() => {
          trackText.classList.add('float-in');
        }, 250);
        
        // Animate "Insights" after "Track"
        setTimeout(() => {
          insightsText.classList.add('float-in');
        }, 500);
        
        // Slide everything out to the right
        setTimeout(() => {
          overlay.classList.add('slide-out');
          // Remove from DOM after animation completes
          setTimeout(() => {
            overlay.remove();
          }, 750);
        }, 1500);
      });
    </script>

    <!-- DaisyUI Top Navbar -->
  <div class="navbar bg-none px-4 p-2 mt-2 fixed top-0 left-0 w-full z-50">
      
      <div class="navbar-start">
      </div>
      <div class="navbar-center lg:flex">
        <div class="menu menu-horizontal">
          <button class="backdrop-blur-md bg-white/30 btn btn-ghost rounded-full mx-2 lg:mx-5">Home</button>
          <button class="backdrop-blur-md bg-white/30 btn btn-ghost rounded-full mx-2 lg:mx-5">Queries</button>
          <button class="backdrop-blur-md bg-white/30 btn btn-ghost rounded-full mx-2 lg:mx-5">About</button>
          <button class="backdrop-blur-md bg-white/30 btn btn-ghost rounded-full mx-2 lg:mx-5">Contact</button>
        </div>
      </div>
      <!-- Centered, italic Impact font home button -->
      <div class="navbar-end">
        </div>
    </div>

    <!-- Z is less than 10 -->
    <div class="w-full h-screen sticky top-0">
      <div class="w-full h-screen flex items-center justify-center bg-transparent relative overflow-hidden">
        <video autoplay loop muted playsinline class="absolute top-0 left-0 w-full h-full object-cover z-0">
          <source src="../static/track_bg.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <div class="w-full flex justify-center items-center z-2 relative" style="pointer-events: none;">
          <!-- <div class="w-screen absolute left-1/2 -translate-x-1/2 top-1/2 z-30 pointer-events-none">
            <span class="block text-center font-impact italic text-primary text-[12vw] sm:text-[14vw] md:text-[16vw] lg:text-[18vw] xl:text-[20vw] font-bold drop-shadow-lg select-none" style="line-height:1.1;">Track</span>
          </div>
          <div class="w-screen absolute left-1/2 -translate-x-1/2 top-1/2 z-30 pointer-events-none">
            <span class="block text-center font-impact italic text-primary text-[12vw] sm:text-[14vw] md:text-[16vw] lg:text-[18vw] xl:text-[20vw] font-bold drop-shadow-lg select-none" style="line-height:1.1;">Insights</span>
          </div> -->
          <div class="w-screen absolute left-1/2 -translate-x-1/2 top-1/2 z-3 pointer-events-none">
            <img src="../static/Track_Insights_Text.png" alt="Running Icon" style="height:80vh; width:100vw" class="absolute left-1/2 top-1/2 -translate-x-[52%] -translate-y-[58%] lg:-translate-y-[60%] select-none z-2" style="pointer-events: none;" />
          </div>  
        </div>
        <div class="absolute top-0 left-0 w-full h-full bg-white/80 z-1"></div>

        <!-- Animated down arrow at bottom center -->
          <!-- Animated down arrow at bottom center, clickable -->
          <button id="scroll-arrow" type="button" class="cursor-pointer absolute bottom-15 left-1/2 -translate-x-1/2 z-4 flex justify-center items-center focus:outline-none bg-transparent border-none" style="pointer-events:auto;">
            <svg class="animate-bounce-slow" width="60" height="60" viewBox="0 0 40 40" fill="#8c0327" xmlns="http://www.w3.org/2000/svg">
              <polygon points="20,30 10,15 30,15" />
            </svg>
          </button>
        <style>
          @keyframes bounce-slow {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-8px); }
          }
          .animate-bounce-slow {
            animation: bounce-slow 1.5s infinite;
          }
        </style>
          <script>
            document.addEventListener('DOMContentLoaded', function() {
              const arrow = document.getElementById('scroll-arrow');
              const nextSection = document.getElementById('search-section');
              if (arrow && nextSection) {
                arrow.addEventListener('click', function() {
                  nextSection.scrollIntoView({ behavior: 'smooth' , block:"nearest"});
                });
              }
            });
          </script>
      </div>
    </div>
    <div style="min-height: 10vh;" class="w-full bg-white relative rounded-t-full"></div>
    <!-- Full-screen image section below hero -->
    <div id="search-section" style="min-height: 140vh;" class="w-full bg-white relative">
      
        <div class="flex h-20"></div>
        <!-- Search box and results -->
        <div class="flex flex-col items-center justify-center w-full max-w-2xl mx-auto pt-8 p-6 bg-white/80 rounded-2xl ">
          <h2 class="font-impact italic text-primary text-3xl md:text-4xl font-bold mb-6" style="font-family: Impact, 'Arial Black', sans-serif;">
            Search for your school or athlete
          </h2>
          <form id="searchForm" class="w-full flex flex-col sm:flex-row gap-4 items-center justify-center mb-4" onsubmit="return false;">
            <input id="searchInput" name="q" type="text" placeholder="Search..." class="input input-bordered input-primary w-full text-lg" autocomplete="off" />
          </form>
          <script>
            // Debounced live search every 100ms
            (function() {
              let debounceTimer;
              const input = document.getElementById('searchInput');
              const form = document.getElementById('searchForm');
              if (!input || !form) return;
              input.addEventListener('input', function() {
                clearTimeout(debounceTimer);
                debounceTimer = setTimeout(() => {
                  form.dispatchEvent(new Event('submit', { cancelable: true }));
                }, 100);
              });
            })();
          </script>
          <div id="results" class="w-full mt-2 text-base-content"></div>
        </div>
    </div>
{% endblock %}
